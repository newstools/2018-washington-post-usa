The lobbying campaign to save the Iran nuclear agreement was intense and took months. British Prime Minister Theresa May raised the deal with President Trump in more than a dozen phone calls. French President Emmanuel Macron pressed him on it during an elaborate state visit. So did German Chancellor Angela Merkel in a one-day work trip in April. And the Europeans made a Hail Mary pass Monday in the form of a White House visit by British Foreign Secretary Boris Johnson. But for Trump, the decision to torpedo one of President Barack Obama’s signature foreign policy achievements had effectively been made last October, when he declared that Iran was not in compliance with the deal and called on European allies to negotiate better terms. The foundation was laid even earlier, in fact, as Trump declared the Iran accord one of the “worst” deals in U.S. history at his campaign rallies — even mocking its architect, former secretary of state John F. Kerry, as weak for having fallen off his bicycle during a visit to Geneva for negotiations. For Trump’s longtime advisers, the only surprise in Tuesday’s announcement shredding the Iran deal was that it took the president 15 months to make. “The administration just said, ‘Okay, we’ve been telling you all through the campaign and the last year and a half this is where we are, and guess what? This is where we are,’ ” said former House speaker Newt Gingrich, a Trump ally. This isn’t the first time Trump has had to decide whether to continue to waive sanctions against Iran. The first two times, his State Department — then led by Rex Tillerson — advocated waiving the sanctions to provide European allies time to address the United States’ concerns about the agreement and work on fixes. The second time, Trump, as well as Vice President Pence, expressed skepticism but were persuaded by the secretary of state to give the Europeans more time. In the administration’s private talks, officials said, Defense Secretary Jim Mattis agreed with Tillerson to explore the possibility of a supplemental agreement that would extend the deal’s restrictions and curb Iran’s ballistic missile activity and nuclear fuel production. The president’s aides argued Tuesday that Trump gave U.S. allies more than enough time to come up with terms he would find satisfactory, but many Europeans privately said that is disingenuous because the president has long said he intended to rip up the deal. “He didn’t get out of the deal until now because he gave repeated opportunities to try to fix the deal,” White House national security adviser John Bolton told reporters Tuesday. “The president wanted to let all the efforts go forward, and he did, right up until just a few days before the May 12 deadline.” Unlike in October, Trump’s Cabinet put up little resistance to a decision many viewed as a fait accompli, given the president’s March firing of two key Iran deal defenders: Tillerson and national security adviser H.R. McMaster. In their place, Trump installed two hawks and staunch critics of the Iran deal: Bolton and Secretary of State Mike Pompeo. “Everyone’s on the same page now,” said one White House official, noting that Treasury Secretary Steven Mnuchin, whose department oversees economic sanctions, also shared the president’s instincts to withdraw, even though doing so was expected to have economic ramifications. Mattis, perhaps realizing he was outnumbered after the ouster of Tillerson, refrained from aggressively rehashing his earlier opposition, said the White House official who, like others, spoke on the condition of anonymity to discuss a sensitive matter. In recent weeks, administration officials have been strategizing over how to manage the economic fallout, including possible spikes in oil prices, and have prepared a number of contingencies, a White House official said. Trump’s decision opens up a deep rift with U.S. allies in Europe who for months have been locked in painstaking staff-level talks with their American counterparts, led by Brian Hook, director of policy planning at the State Department. The French, German, British and U.S. delegations held monthly meetings in an effort to find common ground and avoid sparking a new conflict in the Middle East. On Tuesday, the leaders of the three European governments issued a joint statement saying they “regret” the American decision and vowed to continue to abide by the agreement. Trump’s decision to impose sanctions on companies that do business with Iran, after a brief grace period, has set off a scramble in European capitals as they seek to protect their companies from punitive U.S. measures. If European companies stop all commerce with Iran, experts fear that Tehran may conclude that the deal is of little value and resume developing its nuclear program. Even as European leaders pressed Trump with these arguments, the president’s advisers reminded him over and over again of what he had promised as a candidate, according to another White House official. This is the same approach some advisers, including former chief White House strategist Stephen K. Bannon, took with Trump last year when trying to urge him to withdraw the United States from the Paris climate accord. “One of the most powerful persuasion tools that anybody could possibly have with Trump is to simply point out that you said you were going to do this during the campaign,” the White House official said. “I’ve seen it over and over again. He shrugs his shoulders and says, ‘I told everybody this is what I was going to do.’ ” In the first major foreign policy speech of his campaign, in April 2016, Trump outlined his opposition to the Iran deal. For a man who sees much of life through the prism of winning and losing, Trump said he saw no chance of winning without first walking away. Christopher Ruddy, a friend of the president’s, said Tuesday’s decision represented “classic Donald Trump negotiating tactics.” “He’s saying, ‘I don’t like the deal, I’m ripping it up, I’m starting anew and I’m going to fix things,’ ” said Ruddy, chairman of Newsmax. “It’s a hardball tactic that he’s taking, but it’s in keeping with how he approaches things.” Europeans long argued that the U.S. demands amounted to a violation of the pact — something they were not willing to do. Trump’s decision Tuesday left bitterness among the European delegation, some of whom felt that Hook’s team stopped working in good faith in the final weeks as it appeared that Trump had no appetite for salvaging the deal. A senior Trump administration official denied the accusation, saying that European opposition to extending the restrictions of the deal, also known as the sunset clause, doomed the talks. “We made great progress with the Europeans to address the full range of Iran’s threats. But the last and most critical item in the talks were fixing the sunsets,” the official said. “Unfortunately, the Europeans were not able to accept our language fixing this deficiency.” The American architects of the Iran deal condemned Trump’s announcement in unusually harsh terms. Obama, who rarely reacts publicly to Trump’s actions, issued a lengthy statement calling Trump’s decision “a serious mistake.” Kerry said the withdrawal “breaks America’s word.” Former vice president Joe Biden said it will “isolate the United States from nearly every world power.” And former CIA director John O. Brennan called it “foolish” and “dangerous.” But within Trump’s orbit, the president was cheered for following through on something he vowed to do as a candidate. In a statement designed to use the foreign policy announcement to galvanize Trump’s supporters, campaign manager Brad Parscale said, “Over and over again, President Trump has proven that a promise made is a promise kept.” Trump himself has felt confident that his decision to withdraw would not cause global disruption — in part because of experience. When he considered withdrawing from the Paris climate accord and moving the U.S. Embassy in Israel to Jerusalem, some advisers warned that those moves would result in significant upheaval in America’s relationships with key allies, not to mention economic and security challenges. Ultimately, however, the backlash to both decisions failed to register with Trump and he has concluded that critics overstated their case. This has made the president feel more bullish about heeding his instincts to be a disrupter on the world stage, according to a White House official. “One of the funny things about Trump is that he’s tactically very unpredictable but strategically very predictable,” Gingrich said. “He actually has a broad policy consistency, whether it’s tax cuts, conservative judges, deregulation, the Iranians, the North Koreans. He’s willing to listen to you, but he’s not willing to be persuaded to give up his strategic principles.”